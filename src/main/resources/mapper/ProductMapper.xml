<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="product">
    <sql id="query">
        ID
        ,NAME
        ,PRICE
        ,BRAND
        ,CATEGORY
        ,IMAGEURL
    </sql>
    <select id="getSeq" resultType="long">
        SELECT
            seq_product.CURRVAL
        FROM
            DUAL
    </select>

    <select id="getList" resultType="productDto">
        SELECT
            <include refid="query"/>
        FROM
            PRODUCT
    </select>

    <select id="getProduct" parameterType="productDto" resultType="productDto">
        SELECT
            <include refid="query"/>
        FROM
            PRODUCT
        WHERE
            ID = #{id}
    </select>
    <insert id="insert" parameterType="productDto">
        INSERT INTO PRODUCT
            (<include refid="query"/>)
        VALUES
            (
                seq_product.NEXTVAL
                ,#{name}
                ,#{price}
                ,#{brand}
                <if test="category != null">
                    ,#{category}
                </if>
                <if test="category == null">
                    ,NULL
                </if>
                <if test="imageUrl != null">
                    ,#{imageUrl}
                </if>
                <if test="imageUrl == null">
                    ,NULL
                </if>
            )
    </insert>

</mapper>